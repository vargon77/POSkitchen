# main.kv - VERSI√ìN FINAL PROFESIONAL
MDNavigationLayout:

    ScreenManager:
        id: screen_manager

        # ========== PANTALLAS PRINCIPALES ==========
        
        LoginScreen:
            name: "login"

        MenuScreen:
            name: "menu"

        TomaPedidoScreen:
            name: "pedidos"

        CierreCuentaScreen:
            name: "cierre_cuenta"

        CocinaScreen:
            name: "cocina"

        CajaScreen:
            name: "caja"

        ConfigScreen:
            name: "config"

        # ========== PANTALLA INVENTARIO (PLACEHOLDER) ==========
        MDScreen:
            name: "inventario"
            
            MDBoxLayout:
                orientation: "vertical"
                spacing: 0
                md_bg_color: ds_color('light')
                
                # Top Bar
                MDTopAppBar:
                    title: "üì¶ Inventario"
                    md_bg_color: ds_color('primary')
                    elevation: 2
                    left_action_items: [["arrow-left", lambda x: app.cambiar_pantalla("menu")]]
                    right_action_items: [["refresh", lambda x: None]]
                
                # Contenido placeholder
                MDBoxLayout:
                    orientation: "vertical"
                    padding: dp(40)
                    spacing: dp(20)
                    
                    MDLabel:
                        text: "üì¶"
                        font_size: sp(80)
                        halign: "center"
                        size_hint_y: None
                        height: dp(100)
                    
                    MDLabel:
                        text: "M√≥dulo de Inventario"
                        font_style: "H4"
                        halign: "center"
                        theme_text_color: "Primary"
                        size_hint_y: None
                        height: dp(50)
                    
                    MDLabel:
                        text: "En desarrollo"
                        font_style: "Subtitle1"
                        halign: "center"
                        theme_text_color: "Secondary"
                        italic: True
                    
                    MDBoxLayout:
                        size_hint_y: 0.3
                    
                    MDRaisedButton:
                        text: "VOLVER AL MEN√ö"
                        icon: "arrow-left"
                        pos_hint: {"center_x": 0.5}
                        size_hint: (None, None)
                        size: (dp(200), dp(50))
                        md_bg_color: ds_color('primary')
                        on_release: app.cambiar_pantalla("menu")

    # ========== NAVIGATION DRAWER ==========
    MDNavigationDrawer:
        id: nav_drawer
        radius: (0, dp(16), dp(16), 0)
        elevation: 4

        MDBoxLayout:
            orientation: "vertical"
            spacing: 0
            padding: 0

            # ===== HEADER DEL DRAWER =====
            MDCard:
                orientation: "vertical"
                size_hint_y: None
                height: dp(150)
                padding: ds_spacing('lg')
                spacing: ds_spacing('sm')
                md_bg_color: ds_color('primary')
                elevation: 0
                radius: [0]
                
                MDBoxLayout:
                    orientation: "horizontal"
                    spacing: ds_spacing('md')
                    size_hint_y: 0.5
                    
                    # Avatar placeholder
                    MDCard:
                        size_hint: (None, None)
                        size: (dp(60), dp(60))
                        md_bg_color: ds_color('white')
                        radius: [dp(30)]
                        elevation: 2
                        
                        MDLabel:
                            text: "üë§"
                            font_size: sp(32)
                            halign: "center"
                            valign: "middle"
                    
                    MDBoxLayout:
                        orientation: "vertical"
                        spacing: dp(2)
                        
                        MDLabel:
                            text: app.usuario_actual.get('nombre', 'Usuario') if app.usuario_actual else 'Usuario'
                            font_style: "H6"
                            theme_text_color: "Custom"
                            text_color: ds_color('white')
                            bold: True
                            size_hint_y: 0.6
                        
                        MDLabel:
                            text: app.usuario_actual.get('rol', 'Rol').capitalize() if app.usuario_actual else 'Rol'
                            font_style: "Caption"
                            theme_text_color: "Custom"
                            text_color: ds_color('white', 0.8)
                            size_hint_y: 0.4
                
                MDLabel:
                    text: "Men√∫ Principal"
                    font_style: "Subtitle2"
                    theme_text_color: "Custom"
                    text_color: ds_color('white', 0.9)
                    size_hint_y: 0.3

            MDSeparator:
                height: dp(1)

            # ===== LISTA DE OPCIONES =====
            ScrollView:
                do_scroll_x: False
                bar_width: dp(3)
                
                MDList:
                    padding: [0, dp(8), 0, dp(8)]
                    spacing: dp(4)
                    
                    # Home
                    OneLineIconListItem:
                        text: "  üè†  Men√∫ Principal"
                        on_press: app.cambiar_pantalla("menu")
                        theme_text_color: "Primary"
                        
                        IconLeftWidget:
                            icon: "home"
                            theme_icon_color: "Custom"
                            icon_color: ds_color('primary')
                    
                    # Separador
                    MDLabel:
                        text: "OPERACIONES"
                        font_style: "Caption"
                        theme_text_color: "Hint"
                        size_hint_y: None
                        height: dp(32)
                        padding: [dp(16), dp(8), 0, 0]
                    
                    # Tomar Pedido
                    OneLineIconListItem:
                        text: "  üõí  Tomar Pedido"
                        on_press: app.cambiar_pantalla("pedidos")
                        theme_text_color: "Primary"
                        
                        IconLeftWidget:
                            icon: "cart-plus"
                            theme_icon_color: "Custom"
                            icon_color: ds_color('success')
                    
                    # Cierre de Cuenta
                    OneLineIconListItem:
                        text: "  üí∞  Cierre de Cuenta"
                        on_press: app.cambiar_pantalla("cierre_cuenta")
                        theme_text_color: "Primary"
                        
                        IconLeftWidget:
                            icon: "cash-register"
                            theme_icon_color: "Custom"
                            icon_color: ds_color('warning')
                    
                    # Cocina
                    OneLineIconListItem:
                        text: "  üë®‚Äçüç≥  Vista Cocina"
                        on_press: app.cambiar_pantalla("cocina")
                        theme_text_color: "Primary"
                        
                        IconLeftWidget:
                            icon: "chef-hat"
                            theme_icon_color: "Custom"
                            icon_color: ds_color('secondary')
                    
                    # Separador
                    MDLabel:
                        text: "ADMINISTRACI√ìN"
                        font_style: "Caption"
                        theme_text_color: "Hint"
                        size_hint_y: None
                        height: dp(32)
                        padding: [dp(16), dp(8), 0, 0]
                    
                    # Caja
                    OneLineIconListItem:
                        text: "  üíµ  M√≥dulo Caja"
                        on_press: app.cambiar_pantalla("caja")
                        theme_text_color: "Primary"
                        
                        IconLeftWidget:
                            icon: "cash-multiple"
                            theme_icon_color: "Custom"
                            icon_color: ds_color('info')
                    
                    # Inventario
                    OneLineIconListItem:
                        text: "  üì¶  Inventario"
                        on_press: app.cambiar_pantalla("inventario")
                        theme_text_color: "Primary"
                        
                        IconLeftWidget:
                            icon: "package-variant"
                            theme_icon_color: "Custom"
                            icon_color: ds_color('secondary')
                    
                    # Configuraci√≥n
                    OneLineIconListItem:
                        text: "  ‚öôÔ∏è  Configuraci√≥n"
                        on_press: app.cambiar_pantalla("config")
                        theme_text_color: "Primary"
                        
                        IconLeftWidget:
                            icon: "cog"
                            theme_icon_color: "Custom"
                            icon_color: ds_color('gray')

            # ===== SEPARADOR =====
            MDSeparator:
                height: dp(1)

            # ===== FOOTER DEL DRAWER =====
            MDBoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: dp(140)
                spacing: ds_spacing('sm')
                padding: ds_spacing('md')

                # Bot√≥n cambiar tema
                MDRaisedButton:
                    text: "üåô  Cambiar Tema" if not app.is_dark_theme else "‚òÄÔ∏è  Cambiar Tema"
                    size_hint_y: None
                    height: ds_button_height('md')
                    md_bg_color: ds_color('secondary')
                    on_press: app.toggle_theme()

                # Bot√≥n cerrar sesi√≥n
                MDFlatButton:
                    text: "üö™  Cerrar Sesi√≥n"
                    theme_text_color: "Custom"
                    text_color: ds_color('error')
                    size_hint_y: None
                    height: ds_button_height('md')
                    on_press: app.logout_user()
                
                # Info de versi√≥n
                MDLabel:
                    text: "Sistema POS v1.0"
                    font_style: "Caption"
                    theme_text_color: "Hint"
                    halign: "center"
                    size_hint_y: None
                    height: dp(20)
