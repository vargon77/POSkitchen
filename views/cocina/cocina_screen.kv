# views/cocina/cocina_screen.kv - SOLO WIDGETS RESPONSIVOS
<CocinaScreen>:
    ResponsiveBoxLayout:
        orientation: "vertical"
        responsive_spacing: "none"
        responsive_padding: "none"

        # ========== TOP BAR ==========
        MDTopAppBar:
            title: "üë®‚Äçüç≥ Vista Cocina"
            md_bg_color: ds_color('primary')
            elevation: 2
            left_action_items: [["arrow-left", root.ir_a_menu]]
            right_action_items: [["bell-ring", root.ver_alertas], ["refresh", root.cargar_pedidos]]

        # ========== PANEL ESTAD√çSTICAS R√ÅPIDAS ==========
        ResponsiveCard:
            orientation: "horizontal"
            size_hint_y: None
            height: dp(70)
            padding: ds_spacing('sm')
            spacing: ds_spacing('xs')
            elevation: 1
            md_bg_color: ds_color('light')

            # Pendientes
            ResponsiveBoxLayout:
                orientation: "vertical"
                size_hint_x: 0.25
                
                MDLabel:
                    text: "PENDIENTES"
                    font_style: "Caption"
                    halign: "center"
                    size_hint_y: 0.4
                    theme_text_color: "Secondary"
                
                MDLabel:
                    id: label_pendientes
                    text: "0"
                    font_style: "H5"
                    bold: True
                    halign: "center"
                    size_hint_y: 0.6
                    theme_text_color: "Custom"
                    text_color: ds_color('warning')

            # En preparaci√≥n
            ResponsiveBoxLayout:
                orientation: "vertical"
                size_hint_x: 0.25
                
                MDLabel:
                    text: "PREPARANDO"
                    font_style: "Caption"
                    halign: "center"
                    size_hint_y: 0.4
                    theme_text_color: "Secondary"
                
                MDLabel:
                    id: label_preparando
                    text: "0"
                    font_style: "H5"
                    bold: True
                    halign: "center"
                    size_hint_y: 0.6
                    theme_text_color: "Custom"
                    text_color: ds_color('info')

            # Listos
            ResponsiveBoxLayout:
                orientation: "vertical"
                size_hint_x: 0.25
                
                MDLabel:
                    text: "LISTOS"
                    font_style: "Caption"
                    halign: "center"
                    size_hint_y: 0.4
                    theme_text_color: "Secondary"
                
                MDLabel:
                    id: label_listos
                    text: "0"
                    font_style: "H5"
                    bold: True
                    halign: "center"
                    size_hint_y: 0.6
                    theme_text_color: "Custom"
                    text_color: ds_color('success')

            # Tiempo promedio
            ResponsiveBoxLayout:
                orientation: "vertical"
                size_hint_x: 0.25
                
                MDLabel:
                    text: "TIEMPO PROM."
                    font_style: "Caption"
                    halign: "center"
                    size_hint_y: 0.4
                    theme_text_color: "Secondary"
                
                MDLabel:
                    id: label_tiempo_prom
                    text: "0 min"
                    font_style: "Subtitle1"
                    bold: True
                    halign: "center"
                    size_hint_y: 0.6
                    theme_text_color: "Primary"

        # ========== FILTROS R√ÅPIDOS ==========
        ResponsiveCard:
            orientation: "horizontal"
            size_hint_y: None
            height: dp(50)
            padding: [ds_spacing('md'), ds_spacing('xs')]
            spacing: ds_spacing('xs')
            elevation: 0
            md_bg_color: ds_color('white')

            MDLabel:
                text: "Filtrar:"
                font_style: "Subtitle2"
                bold: True
                size_hint_x: None
                width: dp(60)

            ResponsiveChip:
                id: chip_todos
                text: "TODOS"
                selected: True
                on_press: root.filtrar_pedidos('todos')

            ResponsiveChip:
                id: chip_pendientes
                text: "PENDIENTES"
                on_press: root.filtrar_pedidos('pendiente')

            ResponsiveChip:
                id: chip_preparacion
                text: "EN PREP."
                on_press: root.filtrar_pedidos('preparacion')

            ResponsiveChip:
                id: chip_listos_filtro
                text: "LISTOS"
                on_press: root.filtrar_pedidos('listo')

        # ========== GRID DE PEDIDOS ==========
        ResponsiveScrollView:
            do_scroll_x: False
            bar_width: dp(4)
            bar_color: ds_color('primary', 0.3)

            ResponsiveGridLayout:
                id: grid_pedidos
                default_cols: 3
                spacing: ds_spacing('md')
                padding: ds_spacing('md')
                size_hint_y: None
                height: self.minimum_height


# ========== WIDGET: CARD DE PEDIDO COCINA ==========
<PedidoCocinaCard>:
    orientation: "vertical"
    size_hint_y: None
    height: dp(280) if not ds_is_mobile() else dp(260)
    padding: 0
    spacing: 0
    elevation: 3
    radius: dp(12)
    md_bg_color: ds_color('white')
    
    canvas.before:
        Color:
            rgba: root.color_estado
        RoundedRectangle:
            pos: [self.x, self.y + self.height - dp(6), self.width, dp(6)]
            size: [self.width, dp(6)]
            radius: [dp(12), dp(12), 0, 0]
    
    # Header del pedido
    ResponsiveBoxLayout:
        orientation: "horizontal"
        size_hint_y: None
        height: dp(60)
        responsive_padding: "sm"
        responsive_spacing: "sm"
        
        canvas.before:
            Color:
                rgba: root.color_estado_light
            Rectangle:
                pos: self.pos
                size: self.size
        
        ResponsiveBoxLayout:
            orientation: "vertical"
            size_hint_x: 0.5
            
            MDLabel:
                text: f"PEDIDO #{root.pedido_id}"
                font_style: "H6"
                bold: True
                theme_text_color: "Primary"
                size_hint_y: 0.6
            
            MDLabel:
                text: f"Mesa {root.mesa}"
                font_style: "Caption"
                theme_text_color: "Secondary"
                size_hint_y: 0.4
        
        ResponsiveBoxLayout:
            orientation: "vertical"
            size_hint_x: 0.5
            
            MDLabel:
                text: root.tiempo_espera
                font_style: "Subtitle1"
                bold: True
                halign: "right"
                theme_text_color: "Custom"
                text_color: root.color_tiempo
                size_hint_y: 0.6
            
            MDLabel:
                text: root.estado.upper()
                font_style: "Caption"
                halign: "right"
                theme_text_color: "Secondary"
                size_hint_y: 0.4
    
    ResponsiveSeparator:
        height: dp(1)
    
    # Items del pedido
    ResponsiveScrollView:
        size_hint_y: None
        height: dp(120)
        do_scroll_x: False
        bar_width: 0
        
        MDLabel:
            text: root.items_text
            font_style: "Body2"
            size_hint_y: None
            height: self.minimum_height
            padding: [ds_spacing('sm'), ds_spacing('xs')]
    
    ResponsiveSeparator:
        height: dp(1)
    
    # Info mesero
    ResponsiveBoxLayout:
        orientation: "horizontal"
        size_hint_y: None
        height: dp(30)
        padding: [ds_spacing('sm'), dp(4)]
        
        canvas.before:
            Color:
                rgba: ds_color('light')
            Rectangle:
                pos: self.pos
                size: self.size
        
        MDLabel:
            text: f"Mesero: {root.mesero}"
            font_style: "Caption"
            theme_text_color: "Secondary"
    
    # Botones de acci√≥n
    ResponsiveBoxLayout:
        orientation: "horizontal"
        size_hint_y: None
        height: dp(50)
        spacing: dp(4)
        padding: [ds_spacing('xs'), ds_spacing('xs')]
        
        ResponsiveMDRaisedButton:
            text: root.texto_boton_principal
            icon: root.icono_boton_principal
            md_bg_color: root.color_boton_principal
            on_release: root.accion_principal()
        
        ResponsiveMDIconButton:
            icon: "information-outline"
            theme_icon_color: "Custom"
            icon_color: ds_color('info')
            on_release: root.ver_detalle()


# ========== ESTADO VAC√çO ==========
<CocinaEmptyState>:
    orientation: "vertical"
    padding: dp(40)
    spacing: dp(20)
    
    MDLabel:
        text: "üë®‚Äçüç≥"
        font_size: sp(64)
        halign: "center"
        size_hint_y: None
        height: dp(80)
    
    MDLabel:
        text: "Sin pedidos activos"
        font_style: "H5"
        halign: "center"
        theme_text_color: "Secondary"
        size_hint_y: None
        height: dp(40)
    
    MDLabel:
        text: "Los nuevos pedidos aparecer√°n aqu√≠"
        font_style: "Body2"
        halign: "center"
        theme_text_color: "Hint"