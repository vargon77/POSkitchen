# views/menu/menu_screen.kv - VERSIÃ“N RESPONSIVA
# Usando el sistema de diseÃ±o

<MenuScreen>:
    BoxLayout:
        orientation: "vertical"
        
        # ==================== HEADER ====================
        ScreenHeader:
            Button:
                text: "â˜° MenÃº"
                size_hint_x: 0.2
                on_press: app.abrir_menu()
                background_normal: ''
                background_color: app.ds_color('primary') if hasattr(app, 'ds_color') else (1, 0.42, 0.21, 1)
            
            Label:
                text: "Sistema POS"
                font_size: app.ds_font('xl') if hasattr(app, 'ds_font') else '20sp'
                bold: True
                size_hint_x: 0.6
                halign: 'center'
            
            Button:
                text: "ðŸŒ™"
                size_hint_x: 0.2
                on_press: app.toggle_theme()
                background_normal: ''
                background_color: app.ds_color('secondary') if hasattr(app, 'ds_color') else (0.18, 0.77, 0.71, 1)

        # ==================== CONTENIDO PRINCIPAL ====================
        CustomScrollView:
            BoxLayout:
                orientation: "vertical"
                spacing: app.ds_spacing('lg') if hasattr(app, 'ds_spacing') else '20dp'
                padding: app.ds_spacing('lg') if hasattr(app, 'ds_spacing') else '20dp'
                size_hint_y: None
                height: self.minimum_height

                # TÃ­tulo principal
                TitleLabel:
                    text: "Â¡Bienvenido!"
                    halign: 'center'

                CaptionLabel:
                    text: "GestiÃ³n completa para tu negocio"
                    halign: 'center'
                    size_hint_y: None
                    height: '30dp'

                Spacer:

                # Grid de opciones - RESPONSIVO
                ProductGrid:
                    # El nÃºmero de columnas se ajusta automÃ¡ticamente
                    cols: 2 if root.width < 768 else 3 if root.width < 1024 else 4
                    
                    # OpciÃ³n: Tomar Pedido
                    PrimaryButton:
                        text: "ðŸ›’ Tomar Pedido"
                        size_hint_y: None
                        height: '80dp'
                        on_press: app.cambiar_pantalla("pedidos")

                    # OpciÃ³n: Cocina
                    SecondaryButton:
                        text: "ðŸ‘¨â€ðŸ³ Cocina"
                        size_hint_y: None
                        height: '80dp'
                        on_press: app.cambiar_pantalla("cocina")

                    # OpciÃ³n: Inventario
                    WarningButton:
                        text: "ðŸ“¦ Inventario"
                        size_hint_y: None
                        height: '80dp'
                        on_press: app.cambiar_pantalla("inventario")

                    # OpciÃ³n: Caja
                    SuccessButton:
                        text: "ðŸ’° Caja"
                        size_hint_y: None
                        height: '80dp'
                        on_press: app.cambiar_pantalla("caja")

                    # OpciÃ³n: ConfiguraciÃ³n
                    Button:
                        text: "âš™ï¸ Config"
                        size_hint_y: None
                        height: '80dp'
                        background_normal: ''
                        background_color: (0.6, 0.3, 0.8, 1)
                        color: (1, 1, 1, 1)
                        bold: True
                        on_press: app.cambiar_pantalla("config")

                Spacer:

                # Estado del sistema
                ElevatedCard:
                    height: '120dp'
                    
                    SubtitleLabel:
                        text: "Estado del Sistema"
                        halign: 'center'

                    Label:
                        id: status_label
                        text: "Conectado a PostgreSQL"
                        font_size: app.ds_font('base') if hasattr(app, 'ds_font') else '14sp'
                        halign: 'center'
                        color: app.ds_color('success') if hasattr(app, 'ds_color') else (0, 0.5, 0, 1)